<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="shortcut icon" href="./img/fav.png" type="image/x-icon">
		<link rel="stylesheet" href="https://kit-pro.fontawesome.com/releases/v5.12.1/css/pro.min.css">
		<link
		rel="stylesheet" type="text/css" href="/assets/styles/dashboard.css">
		 <script src="https://kit.fontawesome.com/f01941449c.js" crossorigin="anonymous"></script>
		<title>Welcome categories</title>
	</head>
	<body
		class="bg-gray-100">
		<!-- start navbar -->
		<div
			class="md:fixed md:w-full md:top-0 md:z-20 flex flex-row flex-wrap items-center bg-white p-6 border-b border-gray-300">
			<!-- logo -->
			<div class="flex-none w-56 flex flex-row items-center">
				<img src="img/logo.png" class="w-10 flex-none">
				<strong class="capitalize ml-1 flex-1">EventsBro</strong>
				<button id="sliderBtn" class="flex-none text-right text-gray-900 hidden md:block">
					<i class="fad fa-list-ul"></i>
				</button>
			</div>
			<!-- end logo -->
			<!-- navbar content toggle -->
			<button id="navbarToggle" class="hidden md:block md:fixed right-0 mr-6">
				<i class="fad fa-chevron-double-down"></i>
			</button>
			<!-- end navbar content toggle -->
		</div>
		<!-- end navbar -->

		<!-- start wrapper -->
		<div
			class="h-screen flex flex-row flex-wrap">
			<!-- start sidebar -->
			<div
				id="sideBar" class="relative flex flex-col flex-wrap bg-white border-r border-gray-300 p-6 flex-none w-64 md:-ml-64 md:fixed md:top-0 md:z-30 md:h-screen md:shadow-xl animated faster">
				<!-- sidebar content -->
				<div
					class="flex flex-col">
					<!-- sidebar toggle -->
					<div class="text-right hidden md:block mb-4">
						<button id="sideBarHideBtn">
							<i class="fad fa-times-circle"></i>
						</button>
					</div>
					<!-- end sidebar toggle -->
					<p class="uppercase text-xs text-gray-600 mb-4 tracking-wider">homes</p>
					<a href="dashbaord" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
						<i class="fad fa-chart-pie text-xs mr-2"></i>
						Analytics dashboard
					</a>
					<p class="uppercase text-xs text-gray-600 mb-4 mt-4 tracking-wider">apps</p>
					<a href="role.twig" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
						<i class="fad fa-shield-check text-xs mr-2"></i>
						roles
					</a>
					<a href="Event.twig" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
						<i class="fad fa-shield-check text-xs mr-2"></i>
						Events
					</a>
					<a href="categories.twig" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
						<i class="fad fa-calendar-edit text-xs mr-2"></i>
						categories
					</a>
					<a href="users.twig" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
						<i class="fad fa-file-invoice-dollar text-xs mr-2"></i>
						users
					</a>
					<p class="uppercase text-xs text-gray-600 mb-4 mt-4 tracking-wider">UI Elements</p>
					<a href="./typography.html" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
						<i class="fad fa-text text-xs mr-2"></i>
						typography
					</a>
					<a href="./alert.html" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
						<i class="fad fa-whistle text-xs mr-2"></i>
						alerts
					</a>
					<a href="./buttons.html" class="mb-3 capitalize font-medium text-sm hover:text-teal-600 transition ease-in-out duration-500">
						<i class="fad fa-cricket text-xs mr-2"></i>
						buttons
					</a>
				</div>
				<!-- end sidebar content -->
			</div>
			<!-- end sidbar -->

			<!-- views/CategoryView -->
			<div class="mt-7 bg-white rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 border-2 border-indigo-300">
				<div class="p-4 sm:p-7">
					<div class="text-center">
						<h1 class="block text-xl font-bold text-gray-800 dark:text-white">Update Category</h1>
						<p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Category_Name</p>
					</div>

					<div class="mt-5">
						<form id="updateForm" method="POST" enctype="multipart/form-data" class="mt-4 p-4 bg-gray-100 rounded shadow-md">
                        <input type="hidden" id="updateCategoryId" name="category_id">
                        <div class="grid gap-y-4">
                            <div>
                                <label for="updateCategoryName" class="block text-sm font-bold ml-1 mb-2 dark:text-white">Category Name</label>
                                <input type="text" id="updateCategoryName" name="category_name" class="py-3 px-4 block w-full border-2 border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500 shadow-sm" required>
                            </div>
                            <div>
                                <label for="updateCategoryImg" class="block text-sm font-bold ml-1 mb-2 dark:text-white">Category Image</label>
                                <input type="file" id="updateCategoryImg" name="category_img" accept="image/*" class="py-3 px-4 block w-full border-2 border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500 shadow-sm">
                            </div>
                            <button type="submit" class="py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border border-transparent font-semibold bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800">
                                Update Category
                            </button>
                        </div>
                    </form>
					</div>
				</div>
			</div>
		</div>
	</div></div><!-- end wrapper --> <script>
			
				document.getElementById('btnShowForm').addEventListener('click', function(event) {
			        event.preventDefault();
			        document.getElementById('updateCategoryForm').classList.toggle('hidden');
			    });
			       
	
				// Function to open the update form with category data
				function openUpdateForm(categoryId, categoryName, categoryImg) {
            // Populate the form fields
            document.getElementById('updateCategoryId').value = categoryId;
            document.getElementById('updateCategoryName').value = categoryName;

            // Show the update form
            document.getElementById('updateCategoryForm').classList.remove('hidden');
        }

        // Handle update form submission
        document.getElementById('updateForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            const formData = new FormData(event.target);

			console.log(formData);

            try {
                const response = await fetch('/dashboard/categories/update', {
                    method: 'POST',
                    body: formData,
                });

                const result = await response.json();
                if (response.ok) {
                    alert(result.message);
                    location.reload(); // Refresh the page to reflect changes
                } else {
                    alert(result.error);
                }
            } catch (error) {
                console.error('Error updating category:', error);
                alert('Failed to update category. Please try again.');
            }
        });
	
	
					
											    
					
					
											     
									             
												
									</script></body></html>
